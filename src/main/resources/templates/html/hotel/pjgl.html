<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>酒店端</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta content="telephone=no" name="format-detection"/>
    <link rel="stylesheet" th:href="@{../../css/hotel/index.css}"/>
    <link rel="stylesheet" th:href="@{../../css/hotel/base.css}"/>
    <link rel="stylesheet" th:href="@{../../css/hotel/ui.css}"/>
    <script th:src="@{../../js/main.js}"></script>
    <script th:src="@{../../js/jquery.min.js}"></script>
    <script th:src="@{../../js/jquery1.min.js}"></script>
    <script th:src="@{../../js/jquery-1.11.3.min.js}"></script>
    <script th:inline="javascript">
        function f1(id) {
            var word = prompt("回复","");
            var num ="{";
            num += jsonEncodeString("accomID",id)+",";
            num += jsonEncodeString("toCustomerEvaluate",word);
            num +="}";
            // console.log(num);
            $.ajax({
                type:'post',
                data:num,
                contentType :'application/json;charset=UTF-8',
                dataType:'json',
                url :'/test/toCustomerEvaluate',
                success :function(data) {
                    alert("回复成功");
                    window.location.href="/hotel/feedbackManagement";
                },
                error :function(e) {
                    alert("回复失败");
                }})
        }
        function f(id) {
            var num ="{";
            num += jsonEncodeString("accomID",id);
            num +="}";
            // console.log(num);
            $.ajax({
                type:'post',
                data:num,
                contentType :'application/json;charset=UTF-8',
                dataType:'json',
                url :'/test/delCustomerEvaluate',
                success :function(data) {
                    alert("OK");
                },
                error :function(e) {
                    alert(e);
                }})
        }
        jsonEncodeString=function(label, value)
        {
            var tmpVal = "\""+label+"\"";
            tmpVal += ":";
            tmpVal +="\""+value+"\"";

            return tmpVal;
        };
    </script>
</head>
<body>
    <header class="ui-flex">
        <dov class="logo">
            盈希智慧酒店软件（酒店端）
        </dov>
        <div class="ui-flex-1"></div>
        <div class="name">你好！管理员01</div>
        <div class="out">退出</div>
    </header>

    <div class="layout ui-flex">
        <ul class="menu">
            <li>
                <a href="roomManagement">
                    <img src="../../images/index_05.jpg">
                    客房管理
                </a>
            </li>
            <li>
                <a href="checkInPeroid">
                    <img src="../../images/index_12.jpg">
                    入住期间
                </a>
            </li>
            <li>
                <a href="restGoods">
                    <img src="../../images/index_14.jpg">
                    遗留物品
                </a>
            </li>
            <li>
                <a href="feeSumUp">
                    <img src="../../images/index_19.jpg">
                    房费统计
                </a>
            </li>
            <li>
                <a href="feedbackManagement" class="ac">
                    <img src="../../images/index_22.jpg">
                    评价管理
                </a>
            </li>
            <li>
                <a href="performanceScore">
                    <img src="../../images/index_24.jpg">
                    绩效分值
                </a>
            </li>
        </ul>

        <div class="ui-flex-1 l_right">
            <div class="rzqj_tabs ui-flex">
                <div class="item ac">
                    按时间
                </div>
            </div>

            <table class="table">
                <thead>
                    <tr>
                        <th rowspan="2">昵称</th>
                        <th rowspan="2">房间号</th>
                        <th rowspan="2">退房日期</th>
                        <th rowspan="2">评价时间</th>
                        <th rowspan="2">评价星级</th>
                        <th rowspan="2">评价内容</th>
                        <th rowspan="2">操作</th>
                        <th colspan="2">评价顾客</th>
                    </tr>
                    <tr>
                        <th>星级</th>
                        <th>具体内容</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="accommodation:${page.content}">
                        <td th:text="${accommodation.member.userName}">张三</td>
                        <td th:text="${accommodation.roomNumber}">101</td>
                        <td th:text="${accommodation.date}">2018.2.2</td>
                        <td th:text="${accommodation.date}">2018.2.2</td>
                        <td th:text="${accommodation.customerEvaluate}">5</td>
                        <td th:text="${accommodation.customerEvaluate}">658</td>

                        <td>
                            <button class="shangjia" th:id="${accommodation.ID}" onclick="f1(this.id)">
                                回复
                            </button>
                            <button class="shanchu" th:id="${accommodation.ID}" onclick="f(this.id)">
                                删除
                            </button>
                        </td>
                        <td th:text="${accommodation.toCustomerStar}">五星</td>
                        <td th:text="${accommodation.toCustomerEvaluate}">服务很好很不错</td>
                    </tr>
                </tbody>
            </table>

            <div class="pages ui-flex">
                <div class="ui-flex-1"></div>
                <span th:if="${page.hasPrevious()}">
                    <a th:href="@{/hotel/feedbackManagement(page=${page.number-1},size=${page.size})}">Previous</a>
                </span>
                <th:block th:each="i: ${#numbers.sequence(0, page.totalPages - 1)}">
                    <span th:if="${page.number == i}" class="selected">[[${i}+1]]</span>
                    <span th:unless="${page.number == i}">
                         <a th:href="@{/hotel/feedbackManagement(page=${i},size=${page.size})}">[[${i}+1]]</a>
                    </span>
                </th:block>
                <span th:if="${page.hasNext()}">
                    <a th:href="@{/hotel/feedbackManagement(page=${page.number+1},size=${page.size})}">Next</a>
                </span>
                <div class="ui-flex-1"></div>

            </div>
        </div>
    </div>

</body>
</html>
